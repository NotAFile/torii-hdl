<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>First-in first-out queues &mdash; Torii-HDL unknown documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/platformpicker.css" type="text/css" />
      <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    <link rel="canonical" href="https://shrine-maiden-heavy-industries.github.io/torii-hdl/stdlib/fifo.html" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
        <script src="../_static/platformpicker.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Platform integration" href="../platform.html" />
    <link rel="prev" title="Clock domain crossing" href="cdc.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../cover.html" class="icon icon-home"> Torii-HDL
          </a>
              <div class="version">
                unknown
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Language &amp; toolchain</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../intro.html">Introduction</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../intro.html#the-torii-language">The Torii language</a></li>
<li class="toctree-l3"><a class="reference internal" href="../intro.html#the-torii-standard-library">The Torii standard library</a></li>
<li class="toctree-l3"><a class="reference internal" href="../intro.html#the-torii-simulator">The Torii simulator</a></li>
<li class="toctree-l3"><a class="reference internal" href="../intro.html#the-torii-build-system">The Torii build system</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../intro.html#fpga-toolchain-integration">FPGA toolchain integration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../intro.html#development-board-definitions">Development board definitions</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../install.html">Installation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../install.html#system-requirements">System requirements</a></li>
<li class="toctree-l3"><a class="reference internal" href="../install.html#installing-prerequisites">Installing prerequisites</a></li>
<li class="toctree-l3"><a class="reference internal" href="../install.html#installing-torii">Installing Torii</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../install.html#latest-release">Latest release</a></li>
<li class="toctree-l4"><a class="reference internal" href="../install.html#development-snapshot">Development snapshot</a></li>
<li class="toctree-l4"><a class="reference internal" href="../install.html#editable-development-snapshot">Editable development snapshot</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../install.html#installing-board-definitions">Installing board definitions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../start.html">Getting started</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../start.html#a-counter">A counter</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../start.html#implementing-a-counter">Implementing a counter</a></li>
<li class="toctree-l4"><a class="reference internal" href="../start.html#testing-a-counter">Testing a counter</a></li>
<li class="toctree-l4"><a class="reference internal" href="../start.html#converting-a-counter">Converting a counter</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../start.html#a-blinking-led">A blinking LED</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../tutorial.html">Tutorial</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lang.html">Language guide</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../lang.html#the-prelude">The prelude</a></li>
<li class="toctree-l3"><a class="reference internal" href="../lang.html#values">Values</a></li>
<li class="toctree-l3"><a class="reference internal" href="../lang.html#constants">Constants</a></li>
<li class="toctree-l3"><a class="reference internal" href="../lang.html#shapes">Shapes</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../lang.html#shapes-of-values">Shapes of values</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../lang.html#shape-casting">Shape casting</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../lang.html#shapes-from-integers">Shapes from integers</a></li>
<li class="toctree-l4"><a class="reference internal" href="../lang.html#shapes-from-ranges">Shapes from ranges</a></li>
<li class="toctree-l4"><a class="reference internal" href="../lang.html#shapes-from-enumerations">Shapes from enumerations</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../lang.html#value-casting">Value casting</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../lang.html#values-from-integers">Values from integers</a></li>
<li class="toctree-l4"><a class="reference internal" href="../lang.html#values-from-enumeration-members">Values from enumeration members</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../lang.html#signals">Signals</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../lang.html#signal-shapes">Signal shapes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../lang.html#signal-names">Signal names</a></li>
<li class="toctree-l4"><a class="reference internal" href="../lang.html#initial-signal-values">Initial signal values</a></li>
<li class="toctree-l4"><a class="reference internal" href="../lang.html#reset-less-signals">Reset-less signals</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../lang.html#operators">Operators</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../lang.html#performing-or-describing-computations">Performing or describing computations?</a></li>
<li class="toctree-l4"><a class="reference internal" href="../lang.html#width-extension">Width extension</a></li>
<li class="toctree-l4"><a class="reference internal" href="../lang.html#arithmetic-operators">Arithmetic operators</a></li>
<li class="toctree-l4"><a class="reference internal" href="../lang.html#comparison-operators">Comparison operators</a></li>
<li class="toctree-l4"><a class="reference internal" href="../lang.html#bitwise-shift-and-rotate-operators">Bitwise, shift, and rotate operators</a></li>
<li class="toctree-l4"><a class="reference internal" href="../lang.html#reduction-operators">Reduction operators</a></li>
<li class="toctree-l4"><a class="reference internal" href="../lang.html#logical-operators">Logical operators</a></li>
<li class="toctree-l4"><a class="reference internal" href="../lang.html#bit-sequence-operators">Bit sequence operators</a></li>
<li class="toctree-l4"><a class="reference internal" href="../lang.html#conversion-operators">Conversion operators</a></li>
<li class="toctree-l4"><a class="reference internal" href="../lang.html#choice-operator">Choice operator</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../lang.html#modules">Modules</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../lang.html#control-domains">Control domains</a></li>
<li class="toctree-l4"><a class="reference internal" href="../lang.html#assigning-to-signals">Assigning to signals</a></li>
<li class="toctree-l4"><a class="reference internal" href="../lang.html#assignment-targets">Assignment targets</a></li>
<li class="toctree-l4"><a class="reference internal" href="../lang.html#assignment-domains">Assignment domains</a></li>
<li class="toctree-l4"><a class="reference internal" href="../lang.html#assignment-order">Assignment order</a></li>
<li class="toctree-l4"><a class="reference internal" href="../lang.html#control-structures">Control structures</a></li>
<li class="toctree-l4"><a class="reference internal" href="../lang.html#active-and-inactive-assignments">Active and inactive assignments</a></li>
<li class="toctree-l4"><a class="reference internal" href="../lang.html#combinatorial-evaluation">Combinatorial evaluation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../lang.html#synchronous-evaluation">Synchronous evaluation</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2 current"><a class="reference internal" href="../stdlib.html">Standard library</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="coding.html">Code conversion</a><ul>
<li class="toctree-l4"><a class="reference internal" href="coding.html#one-hot-coding">One-hot coding</a></li>
<li class="toctree-l4"><a class="reference internal" href="coding.html#priority-coding">Priority coding</a></li>
<li class="toctree-l4"><a class="reference internal" href="coding.html#gray-coding">Gray coding</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="cdc.html">Clock domain crossing</a><ul>
<li class="toctree-l4"><a class="reference internal" href="cdc.html#torii.lib.cdc.FFSynchronizer"><code class="docutils literal notranslate"><span class="pre">FFSynchronizer</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="cdc.html#torii.lib.cdc.AsyncFFSynchronizer"><code class="docutils literal notranslate"><span class="pre">AsyncFFSynchronizer</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="cdc.html#torii.lib.cdc.ResetSynchronizer"><code class="docutils literal notranslate"><span class="pre">ResetSynchronizer</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="cdc.html#torii.lib.cdc.PulseSynchronizer"><code class="docutils literal notranslate"><span class="pre">PulseSynchronizer</span></code></a></li>
</ul>
</li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">First-in first-out queues</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#torii.lib.fifo.FIFOInterface"><code class="docutils literal notranslate"><span class="pre">FIFOInterface</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#torii.lib.fifo.SyncFIFO"><code class="docutils literal notranslate"><span class="pre">SyncFIFO</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#torii.lib.fifo.SyncFIFOBuffered"><code class="docutils literal notranslate"><span class="pre">SyncFIFOBuffered</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#torii.lib.fifo.AsyncFIFO"><code class="docutils literal notranslate"><span class="pre">AsyncFIFO</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#torii.lib.fifo.AsyncFIFOBuffered"><code class="docutils literal notranslate"><span class="pre">AsyncFIFOBuffered</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../platform.html">Platform integration</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../platform/intel.html">Intel</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../platform/intel.html#torii.vendor.intel.IntelPlatform"><code class="docutils literal notranslate"><span class="pre">IntelPlatform</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../platform/lattice-ecp5.html">Lattice ECP5</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../platform/lattice-ecp5.html#torii.vendor.lattice_ecp5.LatticeECP5Platform"><code class="docutils literal notranslate"><span class="pre">LatticeECP5Platform</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../platform/lattice-ice40.html">Lattice iCE40</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../platform/lattice-ice40.html#torii.vendor.lattice_ice40.LatticeICE40Platform"><code class="docutils literal notranslate"><span class="pre">LatticeICE40Platform</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../platform/lattice-machxo-2-3l.html">Lattice MachXO2 and MachXO3L</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../platform/lattice-machxo-2-3l.html#torii.vendor.lattice_machxo_2_3l.LatticeMachXO2Platform"><code class="docutils literal notranslate"><span class="pre">LatticeMachXO2Platform</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../platform/lattice-machxo-2-3l.html#torii.vendor.lattice_machxo_2_3l.LatticeMachXO3LPlatform"><code class="docutils literal notranslate"><span class="pre">LatticeMachXO3LPlatform</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../platform/lattice-machxo-2-3l.html#torii.vendor.lattice_machxo_2_3l.LatticeMachXO2Or3LPlatform"><code class="docutils literal notranslate"><span class="pre">LatticeMachXO2Or3LPlatform</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../platform/quicklogic.html">Quicklogic</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../platform/quicklogic.html#torii.vendor.quicklogic.QuicklogicPlatform"><code class="docutils literal notranslate"><span class="pre">QuicklogicPlatform</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../platform/xilinx.html">Xilinx</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../platform/xilinx.html#torii.vendor.xilinx.XilinxPlatform"><code class="docutils literal notranslate"><span class="pre">XilinxPlatform</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../changes.html">Changelog</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../changes.html#next-version">Next version</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#toolchain-changes">Toolchain changes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#platform-integration-changes">Platform integration changes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../changes.html#version-0-3">Version 0.3</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#migrating-from-version-0-2">Migrating from version 0.2</a></li>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#language-changes">Language changes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#standard-library-changes">Standard library changes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#id1">Toolchain changes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#id2">Platform integration changes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../changes.html#versions-0-1-0-2">Versions 0.1, 0.2</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference external" href="https://torii-lang.org/docs/torii-boards/latest/">Board definitions</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../cover.html">Torii-HDL</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content style-external-links">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../cover.html" class="icon icon-home"></a></li>
          <li class="breadcrumb-item"><a href="../index.html">Language &amp; toolchain</a></li>
          <li class="breadcrumb-item"><a href="../stdlib.html">Standard library</a></li>
      <li class="breadcrumb-item active">First-in first-out queues</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="module-torii.lib.fifo">
<span id="first-in-first-out-queues"></span><h1>First-in first-out queues<a class="headerlink" href="#module-torii.lib.fifo" title="Permalink to this heading"></a></h1>
<p>The <code class="docutils literal notranslate"><span class="pre">torii.lib.fifo</span></code> module provides building blocks for first-in, first-out queues.</p>
<dl class="py class">
<dt class="sig sig-object py" id="torii.lib.fifo.FIFOInterface">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">torii.lib.fifo.</span></span><span class="sig-name descname"><span class="pre">FIFOInterface</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">width</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">depth</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fwft</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#torii.lib.fifo.FIFOInterface" title="Permalink to this definition"></a></dt>
<dd><p>Data written to the input interface (<code class="docutils literal notranslate"><span class="pre">w_data</span></code>, <code class="docutils literal notranslate"><span class="pre">w_rdy</span></code>, <code class="docutils literal notranslate"><span class="pre">w_en</span></code>) is buffered and can be
read at the output interface (<code class="docutils literal notranslate"><span class="pre">r_data</span></code>, <code class="docutils literal notranslate"><span class="pre">r_rdy</span></code>, <code class="docutils literal notranslate"><span class="pre">r_en</span></code>). The data entry written first
to the input also appears first on the output.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>width</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a>) – Bit width of data entries.</p></li>
<li><p><strong>depth</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a>) – Depth of the queue. If zero, the FIFO cannot be read from or written to.</p></li>
<li><p><strong>fwft</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a>) – First-word fallthrough. If set, when <code class="docutils literal notranslate"><span class="pre">r_rdy</span></code> rises, the first entry is already
available, i.e. <code class="docutils literal notranslate"><span class="pre">r_data</span></code> is valid. Otherwise, after <code class="docutils literal notranslate"><span class="pre">r_rdy</span></code> rises, it is necessary
to strobe <code class="docutils literal notranslate"><span class="pre">r_en</span></code> for <code class="docutils literal notranslate"><span class="pre">r_data</span></code> to become valid.</p></li>
</ul>
</dd>
<dt class="field-even">Variables</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>w_data</strong> (<em>Signal</em><em>(</em><em>width</em><em>)</em><em>, </em><em>in</em>) – Input data.</p></li>
<li><p><strong>w_rdy</strong> (<em>Signal</em><em>(</em><em>1</em><em>)</em><em>, </em><em>out</em>) – Asserted if there is space in the queue, i.e. <code class="docutils literal notranslate"><span class="pre">w_en</span></code> can be asserted to write
a new entry.</p></li>
<li><p><strong>w_en</strong> (<em>Signal</em><em>(</em><em>1</em><em>)</em><em>, </em><em>in</em>) – Write strobe. Latches <code class="docutils literal notranslate"><span class="pre">w_data</span></code> into the queue. Does nothing if <code class="docutils literal notranslate"><span class="pre">w_rdy</span></code> is not asserted.</p></li>
<li><p><strong>w_level</strong> (<em>Signal</em><em>(</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#range" title="(in Python v3.11)"><em>range</em></a><em>(</em><em>depth + 1</em><em>)</em><em>)</em><em>, </em><em>out</em>) – Number of unread entries.</p></li>
<li><p><strong>r_data</strong> (<em>Signal</em><em>(</em><em>width</em><em>)</em><em>, </em><em>out</em>) – Output data. The conditions in which <code class="docutils literal notranslate"><span class="pre">r_data</span></code> is valid depends on the type of the queue.</p></li>
<li><p><strong>r_rdy</strong> (<em>Signal</em><em>(</em><em>1</em><em>)</em><em>, </em><em>out</em>) – Asserted if there is an entry in the queue, i.e. <code class="docutils literal notranslate"><span class="pre">r_en</span></code> can be asserted to read
an existing entry.</p></li>
<li><p><strong>r_en</strong> (<em>Signal</em><em>(</em><em>1</em><em>)</em><em>, </em><em>in</em>) – Read strobe. Makes the next entry (if any) available on <code class="docutils literal notranslate"><span class="pre">r_data</span></code> at the next cycle.
Does nothing if <code class="docutils literal notranslate"><span class="pre">r_rdy</span></code> is not asserted.</p></li>
<li><p><strong>r_level</strong> (<em>Signal</em><em>(</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#range" title="(in Python v3.11)"><em>range</em></a><em>(</em><em>depth + 1</em><em>)</em><em>)</em><em>, </em><em>out</em>) – Number of unread entries.</p></li>
</ul>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <a class="reference internal" href="#torii.lib.fifo.FIFOInterface" title="torii.lib.fifo.FIFOInterface"><code class="xref py py-class docutils literal notranslate"><span class="pre">FIFOInterface</span></code></a> class can be used directly to substitute a FIFO in tests, or inherited from in a custom FIFO implementation.</p>
</div>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="torii.lib.fifo.SyncFIFO">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">torii.lib.fifo.</span></span><span class="sig-name descname"><span class="pre">SyncFIFO</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">width</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">depth</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fwft</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#torii.lib.fifo.SyncFIFO" title="Permalink to this definition"></a></dt>
<dd><p>Synchronous first in, first out queue.</p>
<p>Read and write interfaces are accessed from the same clock domain. If different clock domains
are needed, use <a class="reference internal" href="#torii.lib.fifo.AsyncFIFO" title="torii.lib.fifo.AsyncFIFO"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncFIFO</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>width</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a>) – Bit width of data entries.</p></li>
<li><p><strong>depth</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a>) – Depth of the queue. If zero, the FIFO cannot be read from or written to.</p></li>
<li><p><strong>fwft</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a>) – First-word fallthrough. If set, when the queue is empty and an entry is written into it,
that entry becomes available on the output on the same clock cycle. Otherwise, it is
necessary to assert <code class="docutils literal notranslate"><span class="pre">r_en</span></code> for <code class="docutils literal notranslate"><span class="pre">r_data</span></code> to become valid.</p></li>
</ul>
</dd>
<dt class="field-even">Variables</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>level</strong> (<em>Signal</em><em>(</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#range" title="(in Python v3.11)"><em>range</em></a><em>(</em><em>depth + 1</em><em>)</em><em>)</em><em>, </em><em>out</em>) – Number of unread entries. This level is the same between read and write for synchronous FIFOs.</p></li>
<li><p><strong>w_data</strong> (<em>Signal</em><em>(</em><em>width</em><em>)</em><em>, </em><em>in</em>) – Input data.</p></li>
<li><p><strong>w_rdy</strong> (<em>Signal</em><em>(</em><em>1</em><em>)</em><em>, </em><em>out</em>) – Asserted if there is space in the queue, i.e. <code class="docutils literal notranslate"><span class="pre">w_en</span></code> can be asserted to write
a new entry.</p></li>
<li><p><strong>w_en</strong> (<em>Signal</em><em>(</em><em>1</em><em>)</em><em>, </em><em>in</em>) – Write strobe. Latches <code class="docutils literal notranslate"><span class="pre">w_data</span></code> into the queue. Does nothing if <code class="docutils literal notranslate"><span class="pre">w_rdy</span></code> is not asserted.</p></li>
<li><p><strong>w_level</strong> (<em>Signal</em><em>(</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#range" title="(in Python v3.11)"><em>range</em></a><em>(</em><em>depth + 1</em><em>)</em><em>)</em><em>, </em><em>out</em>) – Number of unread entries.</p></li>
<li><p><strong>r_data</strong> (<em>Signal</em><em>(</em><em>width</em><em>)</em><em>, </em><em>out</em>) – Output data. For FWFT queues, valid if <code class="docutils literal notranslate"><span class="pre">r_rdy</span></code> is asserted. For non-FWFT queues, valid on the next cycle after <code class="docutils literal notranslate"><span class="pre">r_rdy</span></code> and <code class="docutils literal notranslate"><span class="pre">r_en</span></code> have been asserted.</p></li>
<li><p><strong>r_rdy</strong> (<em>Signal</em><em>(</em><em>1</em><em>)</em><em>, </em><em>out</em>) – Asserted if there is an entry in the queue, i.e. <code class="docutils literal notranslate"><span class="pre">r_en</span></code> can be asserted to read
an existing entry.</p></li>
<li><p><strong>r_en</strong> (<em>Signal</em><em>(</em><em>1</em><em>)</em><em>, </em><em>in</em>) – Read strobe. Makes the next entry (if any) available on <code class="docutils literal notranslate"><span class="pre">r_data</span></code> at the next cycle.
Does nothing if <code class="docutils literal notranslate"><span class="pre">r_rdy</span></code> is not asserted.</p></li>
<li><p><strong>r_level</strong> (<em>Signal</em><em>(</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#range" title="(in Python v3.11)"><em>range</em></a><em>(</em><em>depth + 1</em><em>)</em><em>)</em><em>, </em><em>out</em>) – Number of unread entries.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="torii.lib.fifo.SyncFIFOBuffered">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">torii.lib.fifo.</span></span><span class="sig-name descname"><span class="pre">SyncFIFOBuffered</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">width</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">depth</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#torii.lib.fifo.SyncFIFOBuffered" title="Permalink to this definition"></a></dt>
<dd><p>Buffered synchronous first in, first out queue.</p>
<p>This queue’s interface is identical to <a class="reference internal" href="#torii.lib.fifo.SyncFIFO" title="torii.lib.fifo.SyncFIFO"><code class="xref py py-class docutils literal notranslate"><span class="pre">SyncFIFO</span></code></a> configured as <code class="docutils literal notranslate"><span class="pre">fwft=True</span></code>, but it
does not use asynchronous memory reads, which are incompatible with FPGA block RAMs.</p>
<p>In exchange, the latency between an entry being written to an empty queue and that entry
becoming available on the output is increased by one cycle compared to <a class="reference internal" href="#torii.lib.fifo.SyncFIFO" title="torii.lib.fifo.SyncFIFO"><code class="xref py py-class docutils literal notranslate"><span class="pre">SyncFIFO</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>width</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a>) – Bit width of data entries.</p></li>
<li><p><strong>depth</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a>) – Depth of the queue. If zero, the FIFO cannot be read from or written to.</p></li>
<li><p><strong>fwft</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a>) – Always set.</p></li>
</ul>
</dd>
<dt class="field-even">Variables</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>level</strong> (<em>Signal</em><em>(</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#range" title="(in Python v3.11)"><em>range</em></a><em>(</em><em>depth + 1</em><em>)</em><em>)</em><em>, </em><em>out</em>) – Number of unread entries. This level is the same between read and write for synchronous FIFOs.</p></li>
<li><p><strong>w_data</strong> (<em>Signal</em><em>(</em><em>width</em><em>)</em><em>, </em><em>in</em>) – Input data.</p></li>
<li><p><strong>w_rdy</strong> (<em>Signal</em><em>(</em><em>1</em><em>)</em><em>, </em><em>out</em>) – Asserted if there is space in the queue, i.e. <code class="docutils literal notranslate"><span class="pre">w_en</span></code> can be asserted to write
a new entry.</p></li>
<li><p><strong>w_en</strong> (<em>Signal</em><em>(</em><em>1</em><em>)</em><em>, </em><em>in</em>) – Write strobe. Latches <code class="docutils literal notranslate"><span class="pre">w_data</span></code> into the queue. Does nothing if <code class="docutils literal notranslate"><span class="pre">w_rdy</span></code> is not asserted.</p></li>
<li><p><strong>w_level</strong> (<em>Signal</em><em>(</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#range" title="(in Python v3.11)"><em>range</em></a><em>(</em><em>depth + 1</em><em>)</em><em>)</em><em>, </em><em>out</em>) – Number of unread entries.</p></li>
<li><p><strong>r_data</strong> (<em>Signal</em><em>(</em><em>width</em><em>)</em><em>, </em><em>out</em>) – Output data. Valid if <code class="docutils literal notranslate"><span class="pre">r_rdy</span></code> is asserted.</p></li>
<li><p><strong>r_rdy</strong> (<em>Signal</em><em>(</em><em>1</em><em>)</em><em>, </em><em>out</em>) – Asserted if there is an entry in the queue, i.e. <code class="docutils literal notranslate"><span class="pre">r_en</span></code> can be asserted to read
an existing entry.</p></li>
<li><p><strong>r_en</strong> (<em>Signal</em><em>(</em><em>1</em><em>)</em><em>, </em><em>in</em>) – Read strobe. Makes the next entry (if any) available on <code class="docutils literal notranslate"><span class="pre">r_data</span></code> at the next cycle.
Does nothing if <code class="docutils literal notranslate"><span class="pre">r_rdy</span></code> is not asserted.</p></li>
<li><p><strong>r_level</strong> (<em>Signal</em><em>(</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#range" title="(in Python v3.11)"><em>range</em></a><em>(</em><em>depth + 1</em><em>)</em><em>)</em><em>, </em><em>out</em>) – Number of unread entries.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="torii.lib.fifo.AsyncFIFO">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">torii.lib.fifo.</span></span><span class="sig-name descname"><span class="pre">AsyncFIFO</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">width</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">depth</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">r_domain</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'read'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">w_domain</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'write'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">exact_depth</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#torii.lib.fifo.AsyncFIFO" title="Permalink to this definition"></a></dt>
<dd><p>Asynchronous first in, first out queue.</p>
<p>Read and write interfaces are accessed from different clock domains, which can be set when
constructing the FIFO.</p>
<p><a class="reference internal" href="#torii.lib.fifo.AsyncFIFO" title="torii.lib.fifo.AsyncFIFO"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncFIFO</span></code></a> can be reset from the write clock domain. When the write domain reset is
asserted, the FIFO becomes empty. When the read domain is reset, data remains in the FIFO - the
read domain logic should correctly handle this case.</p>
<p><a class="reference internal" href="#torii.lib.fifo.AsyncFIFO" title="torii.lib.fifo.AsyncFIFO"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncFIFO</span></code></a> only supports power of 2 depths. Unless <code class="docutils literal notranslate"><span class="pre">exact_depth</span></code> is specified,
the <code class="docutils literal notranslate"><span class="pre">depth</span></code> parameter is rounded up to the next power of 2.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>width</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a>) – Bit width of data entries.</p></li>
<li><p><strong>depth</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a>) – Depth of the queue. If zero, the FIFO cannot be read from or written to.</p></li>
<li><p><strong>r_domain</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a>) – Read clock domain.</p></li>
<li><p><strong>w_domain</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a>) – Write clock domain.</p></li>
<li><p><strong>fwft</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a>) – Always set.</p></li>
</ul>
</dd>
<dt class="field-even">Variables</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>w_data</strong> (<em>Signal</em><em>(</em><em>width</em><em>)</em><em>, </em><em>in</em>) – Input data.</p></li>
<li><p><strong>w_rdy</strong> (<em>Signal</em><em>(</em><em>1</em><em>)</em><em>, </em><em>out</em>) – Asserted if there is space in the queue, i.e. <code class="docutils literal notranslate"><span class="pre">w_en</span></code> can be asserted to write
a new entry.</p></li>
<li><p><strong>w_en</strong> (<em>Signal</em><em>(</em><em>1</em><em>)</em><em>, </em><em>in</em>) – Write strobe. Latches <code class="docutils literal notranslate"><span class="pre">w_data</span></code> into the queue. Does nothing if <code class="docutils literal notranslate"><span class="pre">w_rdy</span></code> is not asserted.</p></li>
<li><p><strong>w_level</strong> (<em>Signal</em><em>(</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#range" title="(in Python v3.11)"><em>range</em></a><em>(</em><em>depth + 1</em><em>)</em><em>)</em><em>, </em><em>out</em>) – Number of unread entries.</p></li>
<li><p><strong>r_data</strong> (<em>Signal</em><em>(</em><em>width</em><em>)</em><em>, </em><em>out</em>) – Output data. Valid if <code class="docutils literal notranslate"><span class="pre">r_rdy</span></code> is asserted.</p></li>
<li><p><strong>r_rdy</strong> (<em>Signal</em><em>(</em><em>1</em><em>)</em><em>, </em><em>out</em>) – Asserted if there is an entry in the queue, i.e. <code class="docutils literal notranslate"><span class="pre">r_en</span></code> can be asserted to read
an existing entry.</p></li>
<li><p><strong>r_en</strong> (<em>Signal</em><em>(</em><em>1</em><em>)</em><em>, </em><em>in</em>) – Read strobe. Makes the next entry (if any) available on <code class="docutils literal notranslate"><span class="pre">r_data</span></code> at the next cycle.
Does nothing if <code class="docutils literal notranslate"><span class="pre">r_rdy</span></code> is not asserted.</p></li>
<li><p><strong>r_level</strong> (<em>Signal</em><em>(</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#range" title="(in Python v3.11)"><em>range</em></a><em>(</em><em>depth + 1</em><em>)</em><em>)</em><em>, </em><em>out</em>) – Number of unread entries.</p></li>
<li><p><strong>r_rst</strong> (<em>Signal</em><em>(</em><em>1</em><em>)</em><em>, </em><em>out</em>) – Asserted, for at least one read-domain clock cycle, after the FIFO has been reset by
the write-domain reset.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="torii.lib.fifo.AsyncFIFOBuffered">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">torii.lib.fifo.</span></span><span class="sig-name descname"><span class="pre">AsyncFIFOBuffered</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">width</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">depth</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">r_domain</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'read'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">w_domain</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'write'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">exact_depth</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#torii.lib.fifo.AsyncFIFOBuffered" title="Permalink to this definition"></a></dt>
<dd><p>Buffered asynchronous first in, first out queue.</p>
<p>Read and write interfaces are accessed from different clock domains, which can be set when
constructing the FIFO.</p>
<p><a class="reference internal" href="#torii.lib.fifo.AsyncFIFOBuffered" title="torii.lib.fifo.AsyncFIFOBuffered"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncFIFOBuffered</span></code></a> only supports power of 2 plus one depths. Unless <code class="docutils literal notranslate"><span class="pre">exact_depth</span></code>
is specified, the <code class="docutils literal notranslate"><span class="pre">depth</span></code> parameter is rounded up to the next power of 2 plus one.
(The output buffer acts as an additional queue element.)</p>
<p>This queue’s interface is identical to <a class="reference internal" href="#torii.lib.fifo.AsyncFIFO" title="torii.lib.fifo.AsyncFIFO"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncFIFO</span></code></a>, but it has an additional register
on the output, improving timing in case of block RAM that has large clock-to-output delay.</p>
<p>In exchange, the latency between an entry being written to an empty queue and that entry
becoming available on the output is increased by one cycle compared to <a class="reference internal" href="#torii.lib.fifo.AsyncFIFO" title="torii.lib.fifo.AsyncFIFO"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncFIFO</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>width</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a>) – Bit width of data entries.</p></li>
<li><p><strong>depth</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a>) – Depth of the queue. If zero, the FIFO cannot be read from or written to.</p></li>
<li><p><strong>r_domain</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a>) – Read clock domain.</p></li>
<li><p><strong>w_domain</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a>) – Write clock domain.</p></li>
<li><p><strong>fwft</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a>) – Always set.</p></li>
</ul>
</dd>
<dt class="field-even">Variables</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>w_data</strong> (<em>Signal</em><em>(</em><em>width</em><em>)</em><em>, </em><em>in</em>) – Input data.</p></li>
<li><p><strong>w_rdy</strong> (<em>Signal</em><em>(</em><em>1</em><em>)</em><em>, </em><em>out</em>) – Asserted if there is space in the queue, i.e. <code class="docutils literal notranslate"><span class="pre">w_en</span></code> can be asserted to write
a new entry.</p></li>
<li><p><strong>w_en</strong> (<em>Signal</em><em>(</em><em>1</em><em>)</em><em>, </em><em>in</em>) – Write strobe. Latches <code class="docutils literal notranslate"><span class="pre">w_data</span></code> into the queue. Does nothing if <code class="docutils literal notranslate"><span class="pre">w_rdy</span></code> is not asserted.</p></li>
<li><p><strong>w_level</strong> (<em>Signal</em><em>(</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#range" title="(in Python v3.11)"><em>range</em></a><em>(</em><em>depth + 1</em><em>)</em><em>)</em><em>, </em><em>out</em>) – Number of unread entries.</p></li>
<li><p><strong>r_data</strong> (<em>Signal</em><em>(</em><em>width</em><em>)</em><em>, </em><em>out</em>) – Output data. Valid if <code class="docutils literal notranslate"><span class="pre">r_rdy</span></code> is asserted.</p></li>
<li><p><strong>r_rdy</strong> (<em>Signal</em><em>(</em><em>1</em><em>)</em><em>, </em><em>out</em>) – Asserted if there is an entry in the queue, i.e. <code class="docutils literal notranslate"><span class="pre">r_en</span></code> can be asserted to read
an existing entry.</p></li>
<li><p><strong>r_en</strong> (<em>Signal</em><em>(</em><em>1</em><em>)</em><em>, </em><em>in</em>) – Read strobe. Makes the next entry (if any) available on <code class="docutils literal notranslate"><span class="pre">r_data</span></code> at the next cycle.
Does nothing if <code class="docutils literal notranslate"><span class="pre">r_rdy</span></code> is not asserted.</p></li>
<li><p><strong>r_level</strong> (<em>Signal</em><em>(</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#range" title="(in Python v3.11)"><em>range</em></a><em>(</em><em>depth + 1</em><em>)</em><em>)</em><em>, </em><em>out</em>) – Number of unread entries.</p></li>
<li><p><strong>r_rst</strong> (<em>Signal</em><em>(</em><em>1</em><em>)</em><em>, </em><em>out</em>) – Asserted, for at least one read-domain clock cycle, after the FIFO has been reset by
the write-domain reset.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="cdc.html" class="btn btn-neutral float-left" title="Clock domain crossing" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../platform.html" class="btn btn-neutral float-right" title="Platform integration" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Shrine Maiden Heavy Industries.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>