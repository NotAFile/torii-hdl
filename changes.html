<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Changelog &mdash; Torii-HDL unknown documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="_static/platformpicker.css" type="text/css" />
      <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/platformpicker.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="Xilinx" href="platform/xilinx.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="cover.html" class="icon icon-home"> Torii-HDL
          </a>
              <div class="version">
                unknown
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Language &amp; toolchain</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="intro.html">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="install.html">Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="start.html">Getting started</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial.html">Tutorial</a></li>
<li class="toctree-l2"><a class="reference internal" href="lang.html">Language guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="stdlib.html">Standard library</a></li>
<li class="toctree-l2"><a class="reference internal" href="platform.html">Platform integration</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Changelog</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#next-version">Next version</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#toolchain-changes">Toolchain changes</a></li>
<li class="toctree-l4"><a class="reference internal" href="#platform-integration-changes">Platform integration changes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#version-0-3">Version 0.3</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#migrating-from-version-0-2">Migrating from version 0.2</a></li>
<li class="toctree-l4"><a class="reference internal" href="#language-changes">Language changes</a></li>
<li class="toctree-l4"><a class="reference internal" href="#standard-library-changes">Standard library changes</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id1">Toolchain changes</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id2">Platform integration changes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#versions-0-1-0-2">Versions 0.1, 0.2</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference external" href="https://torii-lang.org/docs/torii-boards/latest/">Board definitions</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="cover.html">Torii-HDL</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="cover.html" class="icon icon-home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">Language &amp; toolchain</a></li>
      <li class="breadcrumb-item active">Changelog</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/changes.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="changelog">
<h1>Changelog<a class="headerlink" href="#changelog" title="Permalink to this headline"></a></h1>
<p>This document describes changes to the public interfaces in the Torii language and standard library. It does not include most bug fixes or implementation changes.</p>
<section id="next-version">
<h2>Next version<a class="headerlink" href="#next-version" title="Permalink to this headline"></a></h2>
<p>Support for Python 3.6 has been dropped.</p>
<section id="toolchain-changes">
<h3>Toolchain changes<a class="headerlink" href="#toolchain-changes" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Added: <code class="docutils literal notranslate"><span class="pre">debug_verilog</span></code> override in <code class="xref py py-class docutils literal notranslate"><span class="pre">build.TemplatedPlatform</span></code>.</p></li>
</ul>
</section>
<section id="platform-integration-changes">
<h3>Platform integration changes<a class="headerlink" href="#platform-integration-changes" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Added: <code class="docutils literal notranslate"><span class="pre">OSCH</span></code> as <code class="docutils literal notranslate"><span class="pre">default_clk</span></code> clock source in <code class="xref py py-class docutils literal notranslate"><span class="pre">vendor.lattice_machxo_2_3l.LatticeMachXO2Or3LPlatform</span></code>.</p></li>
</ul>
</section>
</section>
<section id="version-0-3">
<h2>Version 0.3<a class="headerlink" href="#version-0-3" title="Permalink to this headline"></a></h2>
<p>The project has been renamed from nMigen to Amaranth.</p>
<p>Features deprecated in version 0.2 have been removed.</p>
<section id="migrating-from-version-0-2">
<h3>Migrating from version 0.2<a class="headerlink" href="#migrating-from-version-0-2" title="Permalink to this headline"></a></h3>
<p>Apply the following changes to code written against nMigen 0.2 to migrate it to Amaranth 0.3:</p>
<ul class="simple">
<li><p>Update <code class="docutils literal notranslate"><span class="pre">import</span> <span class="pre">nmigen</span> <span class="pre">as</span> <span class="pre">nm</span></code> <a class="reference internal" href="lang.html#lang-prelude"><span class="std std-ref">explicit prelude imports</span></a> to be <code class="docutils literal notranslate"><span class="pre">import</span> <span class="pre">amaranth</span> <span class="pre">as</span> <span class="pre">am</span></code>, and adjust the code to use the <code class="docutils literal notranslate"><span class="pre">am.*</span></code> namespace.</p></li>
<li><p>Update <code class="docutils literal notranslate"><span class="pre">import</span> <span class="pre">nmigen.*</span></code> imports to be <code class="docutils literal notranslate"><span class="pre">import</span> <span class="pre">amaranth.*</span></code>.</p></li>
<li><p>Update <code class="docutils literal notranslate"><span class="pre">import</span> <span class="pre">nmigen_boards.*</span></code> imports to be <code class="docutils literal notranslate"><span class="pre">import</span> <span class="pre">amaranth_boards.*</span></code>.</p></li>
<li><p>Update board definitions using <code class="xref py py-class docutils literal notranslate"><span class="pre">vendor.lattice_machxo2.LatticeMachXO2Platform</span></code> to use <code class="xref py py-class docutils literal notranslate"><span class="pre">vendor.lattice_machxo_2_3l.LatticeMachXO2Platform</span></code>.</p></li>
<li><p>Update board definitions using <code class="xref py py-class docutils literal notranslate"><span class="pre">vendor.xilinx_spartan_3_6.XilinxSpartan3APlatform</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">vendor.xilinx_spartan_3_6.XilinxSpartan6Platform</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">vendor.xilinx_7series.Xilinx7SeriesPlatform</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">vendor.xilinx_ultrascale.XilinxUltrascalePlatform</span></code> to use <code class="xref py py-class docutils literal notranslate"><span class="pre">vendor.xilinx.XilinxPlatform</span></code>.</p></li>
<li><p>Switch uses of <code class="xref py py-class docutils literal notranslate"><span class="pre">hdl.ast.UserValue</span></code> to <code class="xref py py-class docutils literal notranslate"><span class="pre">ValueCastable</span></code>; note that <code class="xref py py-class docutils literal notranslate"><span class="pre">ValueCastable</span></code> does not inherit from <code class="xref py py-class docutils literal notranslate"><span class="pre">Value</span></code>, and inheriting from <code class="xref py py-class docutils literal notranslate"><span class="pre">Value</span></code> is not supported.</p></li>
<li><p>Switch uses of <code class="xref py py-mod docutils literal notranslate"><span class="pre">back.pysim</span></code> to <code class="xref py py-mod docutils literal notranslate"><span class="pre">sim</span></code>.</p></li>
<li><p>Add an explicit <code class="docutils literal notranslate"><span class="pre">ports=</span></code> argument to uses of <code class="xref py py-func docutils literal notranslate"><span class="pre">back.rtlil.convert()</span></code> and <code class="xref py py-func docutils literal notranslate"><span class="pre">back.verilog.convert()</span></code> if missing.</p></li>
<li><p>Remove uses of <code class="xref py py-class docutils literal notranslate"><span class="pre">test.utils.FHDLTestCase</span></code> and vendor the implementation of <code class="xref py py-class docutils literal notranslate"><span class="pre">test.utils.FHDLTestCase.assertFormal</span></code> if necessary.</p></li>
</ul>
<p>While code that uses the features listed as deprecated below will work in Amaranth 0.3, they will be removed in the next version.</p>
</section>
<section id="language-changes">
<h3>Language changes<a class="headerlink" href="#language-changes" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Added: <code class="xref py py-class docutils literal notranslate"><span class="pre">Value</span></code> can be used with <a class="reference external" href="https://docs.python.org/3/library/functions.html#abs" title="(in Python v3.11)"><code class="xref py py-func docutils literal notranslate"><span class="pre">abs()</span></code></a>.</p></li>
<li><p>Added: <code class="xref py py-meth docutils literal notranslate"><span class="pre">Value.rotate_left()</span></code> and <code class="xref py py-meth docutils literal notranslate"><span class="pre">Value.rotate_right()</span></code>.</p></li>
<li><p>Added: <code class="xref py py-meth docutils literal notranslate"><span class="pre">Value.shift_left()</span></code> and <code class="xref py py-meth docutils literal notranslate"><span class="pre">Value.shift_right()</span></code>.</p></li>
<li><p>Added: <code class="xref py py-class docutils literal notranslate"><span class="pre">ValueCastable</span></code>.</p></li>
<li><p>Deprecated: <code class="xref py py-class docutils literal notranslate"><span class="pre">ast.UserValue</span></code>; use <code class="xref py py-class docutils literal notranslate"><span class="pre">ValueCastable</span></code> instead.</p></li>
<li><p>Added: Divison and modulo operators can be used with a negative divisor.</p></li>
</ul>
</section>
<section id="standard-library-changes">
<h3>Standard library changes<a class="headerlink" href="#standard-library-changes" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Added: <code class="xref py py-class docutils literal notranslate"><span class="pre">cdc.PulseSynchronizer</span></code>.</p></li>
<li><p>Added: <code class="xref py py-class docutils literal notranslate"><span class="pre">cdc.AsyncFFSynchronizer</span></code>.</p></li>
<li><p>Changed: <code class="xref py py-class docutils literal notranslate"><span class="pre">fifo.AsyncFIFO</span></code> is reset when the write domain is reset.</p></li>
<li><p>Added: <code class="xref py py-attr docutils literal notranslate"><span class="pre">fifo.AsyncFIFO.r_rst</span></code> is asserted when the write domain is reset.</p></li>
<li><p>Added: <code class="xref py py-attr docutils literal notranslate"><span class="pre">fifo.FIFOInterface.r_level</span></code> and <code class="xref py py-attr docutils literal notranslate"><span class="pre">fifo.FIFOInterface.w_level</span></code>.</p></li>
</ul>
</section>
<section id="id1">
<h3>Toolchain changes<a class="headerlink" href="#id1" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Changed: Backend and simulator reject wires larger than 65536 bits.</p></li>
<li><p>Added: Backend emits Yosys enumeration attributes for <a class="reference internal" href="lang.html#lang-shapeenum"><span class="std std-ref">enumeration-shaped</span></a> signals.</p></li>
<li><p>Added: If a compatible Yosys version is not installed, <code class="xref py py-mod docutils literal notranslate"><span class="pre">back.verilog</span></code> will fall back to the <a class="reference external" href="https://github.com/amaranth-lang/amaranth-yosys">amaranth-yosys</a> PyPI package. The package can be <a class="reference internal" href="install.html#install"><span class="std std-ref">installed</span></a> as <code class="docutils literal notranslate"><span class="pre">amaranth[builtin-yosys]</span></code> to ensure this dependency is available.</p></li>
<li><p>Added: <code class="xref py py-mod docutils literal notranslate"><span class="pre">back.cxxrtl</span></code>.</p></li>
<li><p>Added: <code class="xref py py-mod docutils literal notranslate"><span class="pre">sim</span></code>, a simulator interface with support for multiple simulation backends.</p></li>
<li><p>Deprecated: <code class="xref py py-mod docutils literal notranslate"><span class="pre">back.pysim</span></code>; use <code class="xref py py-mod docutils literal notranslate"><span class="pre">sim</span></code> instead.</p></li>
<li><p>Removed: The <code class="docutils literal notranslate"><span class="pre">with</span> <span class="pre">Simulator(fragment,</span> <span class="pre">...)</span> <span class="pre">as</span> <span class="pre">sim:</span></code> form.</p></li>
<li><p>Removed: <code class="xref py py-meth docutils literal notranslate"><span class="pre">sim.Simulator.add_process()</span></code> with a generator argument.</p></li>
<li><p>Deprecated: <code class="xref py py-meth docutils literal notranslate"><span class="pre">sim.Simulator.step()</span></code>; use <code class="xref py py-meth docutils literal notranslate"><span class="pre">sim.Simulator.advance()</span></code> instead.</p></li>
<li><p>Added: <code class="xref py py-meth docutils literal notranslate"><span class="pre">build.BuildPlan.execute_remote_ssh()</span></code>.</p></li>
<li><p>Deprecated: <code class="xref py py-class docutils literal notranslate"><span class="pre">test.utils.FHDLTestCase</span></code>, with no replacement.</p></li>
<li><p>Deprecated: <code class="xref py py-func docutils literal notranslate"><span class="pre">back.rtlil.convert()</span></code> and <code class="xref py py-func docutils literal notranslate"><span class="pre">back.verilog.convert()</span></code> without an explicit <cite>ports=</cite> argument.</p></li>
<li><p>Changed: VCD output now uses a top-level “bench” module that contains testbench only signals.</p></li>
</ul>
</section>
<section id="id2">
<h3>Platform integration changes<a class="headerlink" href="#id2" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Added: <code class="docutils literal notranslate"><span class="pre">SB_LFOSC</span></code> and <code class="docutils literal notranslate"><span class="pre">SB_HFOSC</span></code> as <code class="docutils literal notranslate"><span class="pre">default_clk</span></code> clock sources in <code class="xref py py-class docutils literal notranslate"><span class="pre">lattice_ice40.LatticeICE40Platform</span></code>.</p></li>
<li><p>Added: <code class="xref py py-class docutils literal notranslate"><span class="pre">lattice_machxo2.LatticeMachXO2Platform</span></code> generates binary (<code class="docutils literal notranslate"><span class="pre">.bit</span></code>) bitstreams.</p></li>
<li><p>Added: <code class="xref py py-class docutils literal notranslate"><span class="pre">lattice_machxo_2_3l.LatticeMachXO3LPlatform</span></code>.</p></li>
<li><p>Deprecated: <code class="xref py py-mod docutils literal notranslate"><span class="pre">lattice_machxo2</span></code>; use <code class="xref py py-class docutils literal notranslate"><span class="pre">lattice_machxo_2_3l.LatticeMachXO2Platform</span></code> instead.</p></li>
<li><p>Removed: <code class="xref py py-class docutils literal notranslate"><span class="pre">xilinx_7series.Xilinx7SeriesPlatform.grade</span></code>; this family has no temperature grades.</p></li>
<li><p>Removed: and <code class="xref py py-class docutils literal notranslate"><span class="pre">xilinx_ultrascale.XilinxUltrascalePlatform.grade</span></code>; this family has temperature grade as part of speed grade.</p></li>
<li><p>Added: Symbiflow toolchain support for <code class="xref py py-class docutils literal notranslate"><span class="pre">xilinx_7series.Xilinx7SeriesPlatform</span></code>.</p></li>
<li><p>Added: <code class="xref py py-class docutils literal notranslate"><span class="pre">lattice_machxo_2_3l.LatticeMachXO2Or3LPlatform</span></code> generates separate Flash and SRAM SVF programming vectors, <code class="docutils literal notranslate"><span class="pre">{{name}}_flash.svf</span></code> and <code class="docutils literal notranslate"><span class="pre">{{name}}_sram.svf</span></code>.</p></li>
<li><p>Deprecated: <code class="xref py py-class docutils literal notranslate"><span class="pre">lattice_machxo_2_3l.LatticeMachXO2Or3LPlatform</span></code> SVF programming vector <code class="docutils literal notranslate"><span class="pre">{{name}}.svf</span></code>; use <code class="docutils literal notranslate"><span class="pre">{{name}}_flash.svf</span></code> instead.</p></li>
<li><p>Added: <code class="xref py py-class docutils literal notranslate"><span class="pre">quicklogic.QuicklogicPlatform</span></code>.</p></li>
<li><p>Added: <code class="docutils literal notranslate"><span class="pre">cyclonev_oscillator</span></code> as <code class="docutils literal notranslate"><span class="pre">default_clk</span></code> clock source in <code class="xref py py-class docutils literal notranslate"><span class="pre">intel.IntelPlatform</span></code>.</p></li>
<li><p>Added: <code class="docutils literal notranslate"><span class="pre">add_settings</span></code> and <code class="docutils literal notranslate"><span class="pre">add_constraints</span></code> overrides in <code class="xref py py-class docutils literal notranslate"><span class="pre">intel.IntelPlatform</span></code>.</p></li>
<li><p>Added: <code class="xref py py-class docutils literal notranslate"><span class="pre">xilinx.XilinxPlatform</span></code>.</p></li>
<li><p>Deprecated: <code class="xref py py-class docutils literal notranslate"><span class="pre">xilinx_spartan_3_6.XilinxSpartan3APlatform</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">xilinx_spartan_3_6.XilinxSpartan6Platform</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">xilinx_7series.Xilinx7SeriesPlatform</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">xilinx_ultrascale.XilinxUltrascalePlatform</span></code>; use <code class="xref py py-class docutils literal notranslate"><span class="pre">xilinx.XilinxPlatform</span></code> instead.</p></li>
<li><p>Added: Mistral toolchain support for <code class="xref py py-class docutils literal notranslate"><span class="pre">intel.IntelPlatform</span></code>.</p></li>
<li><p>Added: <code class="docutils literal notranslate"><span class="pre">synth_design_opts</span></code> override in <code class="xref py py-class docutils literal notranslate"><span class="pre">xilinx.XilinxPlatform</span></code>.</p></li>
</ul>
</section>
</section>
<section id="versions-0-1-0-2">
<h2>Versions 0.1, 0.2<a class="headerlink" href="#versions-0-1-0-2" title="Permalink to this headline"></a></h2>
<p>No changelog is provided for these versions.</p>
<p>The PyPI packages were published under the <code class="docutils literal notranslate"><span class="pre">nmigen</span></code> namespace, rather than <code class="docutils literal notranslate"><span class="pre">amaranth</span></code>.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="platform/xilinx.html" class="btn btn-neutral float-left" title="Xilinx" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Shrine Maiden Heavy Industries.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>